<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ============================================ -->
    <!-- üîç ANOMALY DETECTION VIEWS                   -->
    <!-- ============================================ -->
    
    <!-- Kanban View - Professional Design -->
    <record id="view_asset_anomaly_detection_kanban" model="ir.ui.view">
        <field name="name">asset.anomaly.detection.kanban</field>
        <field name="model">asset.anomaly.detection</field>
        <field name="arch" type="xml">
            <kanban class="o_kanban_dashboard o_ai_kanban" default_group_by="severity">
                <field name="id"/>
                <field name="asset_id"/>
                <field name="severity"/>
                <field name="actual_cost"/>
                <field name="expected_cost"/>
                <field name="deviation"/>
                <field name="z_score"/>
                <field name="anomaly_type"/>
                <field name="state"/>
                
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_global_click">
                            <!-- Header with Severity Color -->
                            <div t-attf-class="p-3 rounded-top" t-attf-style="background: linear-gradient(135deg, #{record.severity.raw_value == 'critical' ? '#ff416c, #ff4b2b' : record.severity.raw_value == 'high' ? '#f093fb, #f5576c' : record.severity.raw_value == 'medium' ? '#4facfe, #00f2fe' : '#11998e, #38ef7d'});">
                                <div class="d-flex justify-content-between align-items-center text-white">
                                    <strong style="font-size: 14px;">
                                        <i t-if="record.severity.raw_value == 'critical'" class="fa fa-exclamation-circle mr-1"/>
                                        <i t-if="record.severity.raw_value == 'high'" class="fa fa-exclamation-triangle mr-1"/>
                                        <i t-if="record.severity.raw_value == 'medium'" class="fa fa-info-circle mr-1"/>
                                        <i t-if="record.severity.raw_value == 'low'" class="fa fa-check-circle mr-1"/>
                                        <field name="severity"/>
                                    </strong>
                                    <span class="badge" style="background: rgba(255,255,255,0.25); font-size: 11px;">
                                        <field name="anomaly_type"/>
                                    </span>
                                </div>
                            </div>
                            
                            <!-- Body -->
                            <div class="p-3">
                                <div class="font-weight-bold mb-2" style="font-size: 13px;">
                                    <i class="fa fa-cube text-muted mr-1"/>
                                    <field name="asset_id"/>
                                </div>
                                
                                <!-- Cost Comparison -->
                                <div class="row mb-2">
                                    <div class="col-6">
                                        <div class="text-muted small">Chi ph√≠ th·ª±c</div>
                                        <div class="font-weight-bold text-danger">
                                            <field name="actual_cost"/>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="text-muted small">D·ª± ki·∫øn</div>
                                        <div class="font-weight-bold text-success">
                                            <field name="expected_cost"/>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Deviation Bar -->
                                <div class="mb-2">
                                    <div class="d-flex justify-content-between small mb-1">
                                        <span class="text-muted">ƒê·ªô l·ªách</span>
                                        <span class="font-weight-bold">
                                            <field name="deviation" widget="percentage"/>
                                        </span>
                                    </div>
                                </div>
                                
                                <!-- Z-Score -->
                                <div class="p-2 rounded" style="background: #f8f9fa;">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="text-muted small">üìä Z-Score</span>
                                        <span class="font-weight-bold" t-attf-style="color: #{Math.abs(record.z_score.raw_value) > 3 ? '#ff416c' : Math.abs(record.z_score.raw_value) > 2 ? '#f5576c' : '#667eea'};">
                                            <field name="z_score" digits="[10,2]"/>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Footer -->
                            <div class="p-2 border-top d-flex justify-content-between align-items-center">
                                <field name="state" widget="label_selection" options="{'classes': {'detected': 'info', 'investigating': 'warning', 'confirmed': 'primary', 'resolved': 'success', 'false_positive': 'secondary'}}"/>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>
    
    <!-- Tree View - Professional -->
    <record id="view_asset_anomaly_detection_tree" model="ir.ui.view">
        <field name="name">asset.anomaly.detection.tree</field>
        <field name="model">asset.anomaly.detection</field>
        <field name="arch" type="xml">
            <tree decoration-danger="severity=='critical'" 
                  decoration-warning="severity in ('high','medium')"
                  decoration-muted="state in ('resolved','false_positive')"
                  default_order="severity desc, detection_date desc">
                <header>
                    <button name="run_anomaly_detection" 
                            string="üîç Qu√©t b·∫•t th∆∞·ªùng" 
                            type="object" 
                            class="btn-primary"/>
                </header>
                <field name="display_name" string="üìã M√£"/>
                <field name="asset_id" string="üì¶ T√†i s·∫£n"/>
                <field name="period_month" string="üìÖ Th√°ng"/>
                <field name="period_year" string="üìÖ NƒÉm"/>
                <field name="actual_cost" string="üí∞ Chi ph√≠ th·ª±c" widget="monetary" options="{'currency_field': 'currency_id'}" sum="T·ªïng"/>
                <field name="expected_cost" string="üíµ D·ª± ki·∫øn" widget="monetary" optional="show"/>
                <field name="deviation" string="üìä ƒê·ªô l·ªách" widget="percentage"/>
                <field name="z_score" string="üìà Z-Score" widget="float" digits="[10,2]"/>
                <field name="severity" string="‚ö†Ô∏è M·ª©c ƒë·ªô" widget="badge" 
                       decoration-danger="severity=='critical'"
                       decoration-warning="severity=='high'"
                       decoration-info="severity=='medium'"
                       decoration-success="severity=='low'"/>
                <field name="anomaly_type" string="üè∑Ô∏è Lo·∫°i" widget="badge"/>
                <field name="state" string="üìä Tr·∫°ng th√°i" widget="badge"
                       decoration-success="state=='resolved'"
                       decoration-info="state=='detected'"
                       decoration-warning="state=='investigating'"
                       decoration-primary="state=='confirmed'"
                       decoration-muted="state=='false_positive'"/>
            </tree>
        </field>
    </record>
    
    <!-- Form View -->
    <record id="view_asset_anomaly_detection_form" model="ir.ui.view">
        <field name="name">asset.anomaly.detection.form</field>
        <field name="model">asset.anomaly.detection</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="action_investigate" string="üîé ƒêi·ªÅu tra" type="object"
                            states="detected" class="btn-primary"/>
                    <button name="action_confirm" string="‚úÖ X√°c nh·∫≠n" type="object"
                            states="investigating" class="btn-success"/>
                    <button name="action_false_positive" string="‚ùå B√°o ƒë·ªông gi·∫£" type="object"
                            states="detected,investigating" class="btn-warning"/>
                    <button name="action_resolve" string="‚úîÔ∏è ƒê√£ x·ª≠ l√Ω" type="object"
                            states="confirmed" class="btn-info"/>
                    <field name="state" widget="statusbar" statusbar_visible="detected,investigating,confirmed,resolved"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="display_name"/>
                        </h1>
                    </div>
                    
                    <group>
                        <group string="üìã Th√¥ng tin">
                            <field name="asset_id"/>
                            <field name="category_id"/>
                            <field name="detection_date"/>
                            <field name="anomaly_type"/>
                            <field name="severity"/>
                        </group>
                        <group string="üí∞ Chi ph√≠">
                            <field name="actual_cost" widget="monetary"/>
                            <field name="expected_cost" widget="monetary"/>
                            <field name="deviation" widget="percentage"/>
                        </group>
                    </group>
                    
                    <group>
                        <group string="üìä Ph√¢n t√≠ch th·ªëng k√™">
                            <field name="period_month"/>
                            <field name="period_year"/>
                            <field name="z_score"/>
                            <field name="isolation_score"/>
                        </group>
                    </group>
                    
                    <notebook>
                        <page string="üìù M√¥ t·∫£" name="description">
                            <group>
                                <field name="description" nolabel="1" placeholder="Chi ti·∫øt v·ªÅ b·∫•t th∆∞·ªùng..."/>
                            </group>
                        </page>
                        <page string="üí° Khuy·∫øn ngh·ªã" name="recommendation">
                            <group>
                                <field name="recommendation" nolabel="1" placeholder="ƒê·ªÅ xu·∫•t h√†nh ƒë·ªông..."/>
                            </group>
                        </page>
                        <page string="üîé ƒêi·ªÅu tra" name="investigation">
                            <group>
                                <field name="investigation_notes" nolabel="1" placeholder="Ghi ch√∫ ƒëi·ªÅu tra..."/>
                            </group>
                            <group string="L·ªãch s·ª≠ b·∫£o tr√¨ li√™n quan">
                                <field name="maintenance_history_ids" nolabel="1">
                                    <tree>
                                        <field name="maintenance_date"/>
                                        <field name="maintenance_type"/>
                                        <field name="actual_cost" widget="monetary"/>
                                        <field name="description"/>
                                    </tree>
                                </field>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>
    
    <!-- Search View -->
    <record id="view_asset_anomaly_detection_search" model="ir.ui.view">
        <field name="name">asset.anomaly.detection.search</field>
        <field name="model">asset.anomaly.detection</field>
        <field name="arch" type="xml">
            <search>
                <field name="asset_id"/>
                <field name="category_id"/>
                <filter name="critical" string="üî¥ Nghi√™m tr·ªçng" domain="[('severity','=','critical')]"/>
                <filter name="high" string="üü† Cao" domain="[('severity','=','high')]"/>
                <filter name="unresolved" string="‚ö†Ô∏è Ch∆∞a x·ª≠ l√Ω" domain="[('state','not in',['resolved','false_positive'])]"/>
                <separator/>
                <filter name="this_month" string="Th√°ng n√†y" domain="[('detection_date','>=', (context_today() - relativedelta(months=1)).strftime('%%Y-%%m-%%d'))]"/>
                <separator/>
                <filter name="spike" string="üìà TƒÉng ƒë·ªôt bi·∫øn" domain="[('anomaly_type','=','spike')]"/>
                <filter name="unusual" string="üìä M·∫´u b·∫•t th∆∞·ªùng" domain="[('anomaly_type','=','unusual_pattern')]"/>
                <group expand="0" string="Nh√≥m theo">
                    <filter name="group_severity" string="M·ª©c ƒë·ªô" context="{'group_by': 'severity'}"/>
                    <filter name="group_asset" string="T√†i s·∫£n" context="{'group_by': 'asset_id'}"/>
                    <filter name="group_type" string="Lo·∫°i" context="{'group_by': 'anomaly_type'}"/>
                    <filter name="group_month" string="Th√°ng" context="{'group_by': 'period_month'}"/>
                </group>
            </search>
        </field>
    </record>
    
    <!-- Pivot View -->
    <record id="view_asset_anomaly_detection_pivot" model="ir.ui.view">
        <field name="name">asset.anomaly.detection.pivot</field>
        <field name="model">asset.anomaly.detection</field>
        <field name="arch" type="xml">
            <pivot string="Ph√¢n t√≠ch b·∫•t th∆∞·ªùng">
                <field name="period_year" type="row"/>
                <field name="period_month" type="row"/>
                <field name="severity" type="col"/>
                <field name="actual_cost" type="measure"/>
            </pivot>
        </field>
    </record>
    
    <!-- Graph View -->
    <record id="view_asset_anomaly_detection_graph" model="ir.ui.view">
        <field name="name">asset.anomaly.detection.graph</field>
        <field name="model">asset.anomaly.detection</field>
        <field name="arch" type="xml">
            <graph string="Bi·ªÉu ƒë·ªì b·∫•t th∆∞·ªùng" type="bar">
                <field name="period_month"/>
                <field name="actual_cost" type="measure"/>
                <field name="severity" type="col"/>
            </graph>
        </field>
    </record>
    
    <!-- Action -->
    <record id="action_asset_anomaly_detection" model="ir.actions.act_window">
        <field name="name">üîç Ph√°t hi·ªán b·∫•t th∆∞·ªùng</field>
        <field name="res_model">asset.anomaly.detection</field>
        <field name="view_mode">kanban,tree,form,pivot,graph</field>
        <field name="search_view_id" ref="view_asset_anomaly_detection_search"/>
        <field name="context">{'search_default_unresolved': 1}</field>
        <field name="help" type="html">
            <div class="text-center" style="padding: 40px;">
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px; border-radius: 20px; margin-bottom: 30px;">
                    <h1 style="color: white; margin-bottom: 15px;">
                        <i class="fa fa-search-plus mr-2"/> Ph√°t hi·ªán b·∫•t th∆∞·ªùng
                    </h1>
                    <p style="color: rgba(255,255,255,0.9); font-size: 16px; margin-bottom: 20px;">
                        H·ªá th·ªëng AI ph√¢n t√≠ch chi ph√≠ b·∫£o tr√¨ v√† ph√°t hi·ªán c√°c ƒëi·ªÉm b·∫•t th∆∞·ªùng
                    </p>
                </div>
                <div class="row justify-content-center">
                    <div class="col-md-4 mb-3">
                        <div style="background: #f8f9fa; padding: 25px; border-radius: 16px; border-left: 4px solid #667eea;">
                            <i class="fa fa-line-chart fa-2x mb-2" style="color: #667eea;"/>
                            <h5>Z-Score Analysis</h5>
                            <p class="text-muted small mb-0">Ph√°t hi·ªán chi ph√≠ l·ªách chu·∫©n th·ªëng k√™</p>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div style="background: #f8f9fa; padding: 25px; border-radius: 16px; border-left: 4px solid #11998e;">
                            <i class="fa fa-tree fa-2x mb-2" style="color: #11998e;"/>
                            <h5>Isolation Forest</h5>
                            <p class="text-muted small mb-0">ML ph√°t hi·ªán m·∫´u chi ph√≠ b·∫•t th∆∞·ªùng</p>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div style="background: #f8f9fa; padding: 25px; border-radius: 16px; border-left: 4px solid #f5576c;">
                            <i class="fa fa-th-large fa-2x mb-2" style="color: #f5576c;"/>
                            <h5>Category Outliers</h5>
                            <p class="text-muted small mb-0">So s√°nh v·ªõi t√†i s·∫£n c√πng lo·∫°i</p>
                        </div>
                    </div>
                </div>
            </div>
        </field>
    </record>
    
    <!-- ============================================ -->
    <!-- üéØ COST OPTIMIZATION VIEWS                   -->
    <!-- ============================================ -->
    
    <!-- Kanban View - Professional Design -->
    <record id="view_asset_cost_optimization_kanban" model="ir.ui.view">
        <field name="name">asset.cost.optimization.kanban</field>
        <field name="model">asset.cost.optimization</field>
        <field name="arch" type="xml">
            <kanban class="o_kanban_dashboard o_ai_kanban" default_group_by="decision">
                <field name="id"/>
                <field name="asset_id"/>
                <field name="category_id"/>
                <field name="decision"/>
                <field name="decision_confidence"/>
                <field name="urgency"/>
                <field name="remaining_life_percent"/>
                <field name="total_maintenance_cost"/>
                <field name="savings_if_replace"/>
                <field name="state"/>
                <field name="currency_id"/>
                
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_global_click">
                            <!-- Header with Decision Color -->
                            <div class="p-3 rounded-top" t-attf-style="background: linear-gradient(135deg, #{record.decision.raw_value == 'replace' or record.decision.raw_value == 'dispose' ? '#ff416c, #ff4b2b' : record.decision.raw_value == 'maintain_now' or record.decision.raw_value == 'major_repair' ? '#f093fb, #f5576c' : '#11998e, #38ef7d'});">
                                <div class="d-flex justify-content-between align-items-center text-white">
                                    <div>
                                        <i t-if="record.decision.raw_value == 'replace'" class="fa fa-refresh fa-lg"/>
                                        <i t-if="record.decision.raw_value == 'dispose'" class="fa fa-trash fa-lg"/>
                                        <i t-if="record.decision.raw_value == 'maintain_now'" class="fa fa-wrench fa-lg"/>
                                        <i t-if="record.decision.raw_value == 'major_repair'" class="fa fa-cogs fa-lg"/>
                                        <i t-if="record.decision.raw_value == 'maintain_later'" class="fa fa-clock-o fa-lg"/>
                                        <i t-if="record.decision.raw_value == 'monitor'" class="fa fa-eye fa-lg"/>
                                    </div>
                                    <strong style="font-size: 12px; text-transform: uppercase;">
                                        <field name="decision"/>
                                    </strong>
                                </div>
                            </div>
                            
                            <!-- Body -->
                            <div class="p-3">
                                <div class="font-weight-bold mb-2" style="font-size: 14px;">
                                    <field name="asset_id"/>
                                </div>
                                <div class="text-muted small mb-3">
                                    <field name="category_id"/>
                                </div>
                                
                                <!-- Remaining Life -->
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between small mb-1">
                                        <span class="text-muted">‚è±Ô∏è Tu·ªïi th·ªç c√≤n l·∫°i</span>
                                        <span class="font-weight-bold"><field name="remaining_life_percent"/>%</span>
                                    </div>
                                    <div class="progress" style="height: 6px; border-radius: 10px;">
                                        <div class="progress-bar" 
                                             role="progressbar" 
                                             t-attf-style="width: #{record.remaining_life_percent.raw_value}%; background: linear-gradient(90deg, #{record.remaining_life_percent.raw_value &lt; 20 ? '#ff416c' : record.remaining_life_percent.raw_value &lt; 50 ? '#f5576c' : '#11998e'} 0%, #{record.remaining_life_percent.raw_value &lt; 20 ? '#ff4b2b' : record.remaining_life_percent.raw_value &lt; 50 ? '#f093fb' : '#38ef7d'} 100%);">
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Stats -->
                                <div class="row small">
                                    <div class="col-6">
                                        <div class="text-muted">üîß Chi ph√≠ BT</div>
                                        <div class="font-weight-bold">
                                            <field name="total_maintenance_cost" widget="monetary"/>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="text-muted">üí∞ Ti·∫øt ki·ªám</div>
                                        <div class="font-weight-bold text-success">
                                            <field name="savings_if_replace" widget="monetary"/>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Confidence -->
                                <div class="mt-3 p-2 rounded" style="background: #f8f9fa;">
                                    <div class="d-flex justify-content-between align-items-center small">
                                        <span class="text-muted">üéØ ƒê·ªô tin c·∫≠y</span>
                                        <span class="font-weight-bold"><field name="decision_confidence"/>%</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Footer -->
                            <div class="p-2 border-top d-flex justify-content-between align-items-center">
                                <field name="urgency" widget="badge" decoration-danger="urgency=='critical'" decoration-warning="urgency=='high'" decoration-info="urgency=='medium'" decoration-success="urgency=='low'"/>
                                <field name="state" widget="label_selection" options="{'classes': {'draft': 'secondary', 'analyzed': 'info', 'approved': 'primary', 'executed': 'success', 'cancelled': 'danger'}}"/>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>
    
    <!-- Tree View - Professional -->
    <record id="view_asset_cost_optimization_tree" model="ir.ui.view">
        <field name="name">asset.cost.optimization.tree</field>
        <field name="model">asset.cost.optimization</field>
        <field name="arch" type="xml">
            <tree decoration-danger="urgency=='critical'" 
                  decoration-warning="urgency=='high'"
                  decoration-success="decision=='monitor'"
                  default_order="urgency desc, decision_confidence desc">
                <header>
                    <button name="analyze_all_assets" 
                            string="üéØ Ph√¢n t√≠ch t·∫•t c·∫£ t√†i s·∫£n" 
                            type="object" 
                            class="btn-primary"/>
                </header>
                <field name="asset_id" string="üì¶ T√†i s·∫£n"/>
                <field name="category_id" string="üìÅ Danh m·ª•c" optional="show"/>
                <field name="asset_age_years" string="üìÖ Tu·ªïi (nƒÉm)" widget="float" digits="[10,1]"/>
                <field name="remaining_life_percent" string="‚è±Ô∏è C√≤n l·∫°i" widget="progressbar"/>
                <field name="total_maintenance_cost" string="üîß T·ªïng chi ph√≠ BT" widget="monetary" sum="T·ªïng"/>
                <field name="cost_to_value_ratio" string="üìä T·ª∑ l·ªá CP/GT" widget="float" digits="[10,1]"/>
                <field name="decision" string="üéØ Quy·∫øt ƒë·ªãnh" widget="badge"
                       decoration-danger="decision in ('replace','dispose')"
                       decoration-warning="decision in ('maintain_now','major_repair')"
                       decoration-success="decision in ('monitor','maintain_later')"/>
                <field name="decision_confidence" string="üéØ ƒê·ªô tin c·∫≠y" widget="progressbar"/>
                <field name="urgency" string="‚ö†Ô∏è C·∫•p ƒë·ªô" widget="badge"
                       decoration-danger="urgency=='critical'"
                       decoration-warning="urgency=='high'"
                       decoration-info="urgency=='medium'"
                       decoration-success="urgency=='low'"/>
                <field name="savings_if_replace" string="üí∞ Ti·∫øt ki·ªám" widget="monetary" optional="show"/>
                <field name="state" string="üìä Tr·∫°ng th√°i" widget="badge"/>
            </tree>
        </field>
    </record>
    
    <!-- Form View -->
    <record id="view_asset_cost_optimization_form" model="ir.ui.view">
        <field name="name">asset.cost.optimization.form</field>
        <field name="model">asset.cost.optimization</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="action_analyze" string="üéØ Ph√¢n t√≠ch" type="object"
                            states="draft" class="btn-primary"/>
                    <button name="action_analyze" string="üîÑ Ph√¢n t√≠ch l·∫°i" type="object"
                            states="analyzed" class="btn-secondary"/>
                    <button name="action_approve" string="‚úÖ Duy·ªát" type="object"
                            states="analyzed" class="btn-success"/>
                    <button name="action_execute" string="‚úîÔ∏è ƒê√£ th·ª±c hi·ªán" type="object"
                            states="approved" class="btn-info"/>
                    <button name="action_cancel" string="‚ùå H·ªßy" type="object"
                            states="draft,analyzed" class="btn-warning"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,analyzed,approved,executed"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="display_name"/>
                        </h1>
                    </div>
                    
                    <!-- Decision Banner -->
                    <div class="alert alert-info" role="alert" attrs="{'invisible': [('state','=','draft')]}">
                        <h4>
                            <field name="decision" readonly="1"/> 
                            <span class="float-right">
                                ƒê·ªô tin c·∫≠y: <field name="decision_confidence" widget="progressbar" class="d-inline-block" style="width: 150px;"/>
                            </span>
                        </h4>
                    </div>
                    
                    <group>
                        <group string="üìã Th√¥ng tin t√†i s·∫£n">
                            <field name="asset_id"/>
                            <field name="category_id"/>
                            <field name="analysis_date"/>
                            <field name="purchase_price" widget="monetary"/>
                            <field name="current_value" widget="monetary"/>
                        </group>
                        <group string="‚è±Ô∏è Tu·ªïi th·ªç">
                            <field name="asset_age_years"/>
                            <field name="expected_lifespan"/>
                            <field name="remaining_life_percent" widget="progressbar"/>
                            <field name="urgency"/>
                        </group>
                    </group>
                    
                    <group>
                        <group string="üîß Chi ph√≠ b·∫£o tr√¨">
                            <field name="total_maintenance_cost" widget="monetary"/>
                            <field name="avg_annual_maintenance" widget="monetary"/>
                            <field name="last_year_maintenance" widget="monetary"/>
                            <field name="maintenance_count"/>
                            <field name="maintenance_trend"/>
                        </group>
                        <group string="üìä Ph√¢n t√≠ch chi ph√≠">
                            <field name="cost_to_value_ratio"/>
                            <field name="annual_cost_ratio"/>
                            <field name="replacement_cost" widget="monetary"/>
                            <field name="projected_3year_maintenance" widget="monetary"/>
                        </group>
                    </group>
                    
                    <group string="üí∞ So s√°nh kinh t·∫ø 5 nƒÉm">
                        <group>
                            <field name="maintain_cost_5year" widget="monetary"/>
                            <field name="replace_cost_5year" widget="monetary"/>
                        </group>
                        <group>
                            <field name="savings_if_replace" widget="monetary"/>
                            <field name="break_even_months"/>
                        </group>
                    </group>
                    
                    <group string="üìÖ Th·ªùi gian">
                        <group>
                            <field name="optimal_maintenance_date"/>
                        </group>
                        <group>
                            <field name="next_decision_date"/>
                        </group>
                    </group>
                    
                    <notebook>
                        <page string="üìù L√Ω do quy·∫øt ƒë·ªãnh" name="reasons">
                            <group>
                                <field name="decision_reasons" nolabel="1"/>
                            </group>
                        </page>
                        <page string="üí° Khuy·∫øn ngh·ªã" name="recommendations">
                            <field name="recommendations" nolabel="1"/>
                        </page>
                        <page string="üîÑ Ph∆∞∆°ng √°n thay th·∫ø" name="alternatives">
                            <group>
                                <field name="alternative_options" nolabel="1"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>
    
    <!-- Search View -->
    <record id="view_asset_cost_optimization_search" model="ir.ui.view">
        <field name="name">asset.cost.optimization.search</field>
        <field name="model">asset.cost.optimization</field>
        <field name="arch" type="xml">
            <search>
                <field name="asset_id"/>
                <field name="category_id"/>
                <filter name="replace" string="üîÑ C·∫ßn thay m·ªõi" domain="[('decision','=','replace')]"/>
                <filter name="maintain_now" string="üîß B·∫£o tr√¨ ngay" domain="[('decision','=','maintain_now')]"/>
                <filter name="critical" string="üî¥ Kh·∫©n c·∫•p" domain="[('urgency','=','critical')]"/>
                <separator/>
                <filter name="pending" string="‚è≥ Ch·ªù x·ª≠ l√Ω" domain="[('state','in',['analyzed','approved'])]"/>
                <group expand="0" string="Nh√≥m theo">
                    <filter name="group_decision" string="Quy·∫øt ƒë·ªãnh" context="{'group_by': 'decision'}"/>
                    <filter name="group_urgency" string="M·ª©c ƒë·ªô" context="{'group_by': 'urgency'}"/>
                    <filter name="group_category" string="Danh m·ª•c" context="{'group_by': 'category_id'}"/>
                </group>
            </search>
        </field>
    </record>
    
    <!-- Pivot View -->
    <record id="view_asset_cost_optimization_pivot" model="ir.ui.view">
        <field name="name">asset.cost.optimization.pivot</field>
        <field name="model">asset.cost.optimization</field>
        <field name="arch" type="xml">
            <pivot string="Ph√¢n t√≠ch quy·∫øt ƒë·ªãnh">
                <field name="category_id" type="row"/>
                <field name="decision" type="col"/>
                <field name="savings_if_replace" type="measure"/>
                <field name="total_maintenance_cost" type="measure"/>
            </pivot>
        </field>
    </record>
    
    <!-- Action -->
    <record id="action_asset_cost_optimization" model="ir.actions.act_window">
        <field name="name">üéØ T·ªëi ∆∞u chi ph√≠ AI</field>
        <field name="res_model">asset.cost.optimization</field>
        <field name="view_mode">kanban,tree,form,pivot</field>
        <field name="search_view_id" ref="view_asset_cost_optimization_search"/>
        <field name="help" type="html">
            <div class="text-center" style="padding: 40px;">
                <div style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); padding: 40px; border-radius: 20px; margin-bottom: 30px;">
                    <h1 style="color: white; margin-bottom: 15px;">
                        <i class="fa fa-bullseye mr-2"/> T·ªëi ∆∞u chi ph√≠ AI
                    </h1>
                    <p style="color: rgba(255,255,255,0.9); font-size: 16px; margin-bottom: 20px;">
                        AI ph√¢n t√≠ch v√† ƒë∆∞a ra quy·∫øt ƒë·ªãnh t·ªëi ∆∞u cho t·ª´ng t√†i s·∫£n
                    </p>
                </div>
                <div class="row justify-content-center">
                    <div class="col-md-4 mb-3">
                        <div style="background: linear-gradient(135deg, #f5576c 0%, #f093fb 100%); padding: 25px; border-radius: 16px; color: white;">
                            <i class="fa fa-wrench fa-2x mb-2"/>
                            <h5>B·∫£o tr√¨ ngay</h5>
                            <p class="small mb-0 opacity-75">C·∫ßn h√†nh ƒë·ªông trong th·ªùi gian ng·∫Øn</p>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div style="background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%); padding: 25px; border-radius: 16px; color: white;">
                            <i class="fa fa-refresh fa-2x mb-2"/>
                            <h5>Thay m·ªõi</h5>
                            <p class="small mb-0 opacity-75">Thay th·∫ø t√†i s·∫£n hi·ªáu qu·∫£ h∆°n</p>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); padding: 25px; border-radius: 16px; color: white;">
                            <i class="fa fa-eye fa-2x mb-2"/>
                            <h5>Theo d√µi</h5>
                            <p class="small mb-0 opacity-75">Ti·∫øp t·ª•c s·ª≠ d·ª•ng v√† gi√°m s√°t</p>
                        </div>
                    </div>
                </div>
            </div>
        </field>
    </record>
    
    <!-- ==================== MENU ==================== -->
    <menuitem id="menu_asset_anomaly_detection" name="üîç Ph√°t hi·ªán b·∫•t th∆∞·ªùng" 
              parent="nhan_su.menu_asset_ai_root" sequence="20"
              action="action_asset_anomaly_detection"/>
    
    <menuitem id="menu_asset_cost_optimization" name="üéØ T·ªëi ∆∞u chi ph√≠" 
              parent="nhan_su.menu_asset_ai_root" sequence="30"
              action="action_asset_cost_optimization"/>
    
</odoo>